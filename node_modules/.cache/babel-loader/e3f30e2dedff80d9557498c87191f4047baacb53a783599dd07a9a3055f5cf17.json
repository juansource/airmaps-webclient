{"ast":null,"code":"import { ref, onMounted } from \"vue\";\nimport Galleria from 'primevue/galleria';\nimport { Annotorious } from '@recogito/annotorious';\nimport '@recogito/annotorious/dist/annotorious.min.css';\nexport default {\n  __name: 'ImageGallery',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const images = ref();\n    const responsiveOptions = ref([{\n      breakpoint: '1500px',\n      numVisible: 5\n    }, {\n      breakpoint: '1024px',\n      numVisible: 3\n    }, {\n      breakpoint: '768px',\n      numVisible: 2\n    }, {\n      breakpoint: '560px',\n      numVisible: 1\n    }]);\n    var anno = null;\n    var photoIndex = 0;\n    const initAnno = () => {\n      displayBasic = true;\n      if (anno != null) {\n        anno.destroy();\n        anno = null;\n      }\n      anno = new Annotorious({\n        image: document.getElementById(\"plan\")\n      });\n      anno.loadAnnotations('http://localhost:3000/testAnnotations.json?sourceImage=' + images.value[photoIndex].itemImageSrc);\n      anno.on('createAnnotation', function (annotation) {\n        console.log('Created annotation', annotation);\n        var data = JSON.stringify(annotation);\n        console.log(data);\n        const requestOptions = {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: data\n        };\n        fetch(\"http://localhost:3000/testAnnotationsAdd\", requestOptions).then(response => response.json()).then(data => this.postId = data.id);\n      });\n      anno.on('createSelection', function (selection) {\n        console.log('Created selection', selection);\n      });\n      anno.on('deleteAnnotation', function (annotation) {\n        console.log('Delete annotation', annotation);\n        var data = JSON.stringify(annotation);\n        console.log(data);\n        const requestOptions = {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: data\n        };\n        fetch(\"http://localhost:3000/testAnnotationsDelete\", requestOptions).then(response => response.json()).then(data => this.postId = data.id);\n      });\n      anno.on('mouseEnterAnnotation', function (annotation, element) {\n        console.log('Mouse ENTERED annotation', annotation, element);\n      });\n      anno.on('selectAnnotation', function (annotation, element) {\n        console.log('Select annotation', annotation, element);\n      });\n      anno.on('cancelSelected', function (selection) {\n        console.log('UNSELECTED', selection);\n      });\n      anno.on('clickAnnotation', function (annotation, element) {\n        console.log('Clicked annotation', annotation, element);\n      });\n    };\n    const prevPhoto = () => {\n      photoIndex = photoIndex - 1;\n      if (photoIndex < 0) {\n        photoIndex = images.value.length - 1;\n      }\n      var img = document.getElementById(\"plan\");\n      img.src = images.value[photoIndex].itemImageSrc;\n      initAnno();\n    };\n    const nextPhoto = () => {\n      photoIndex = photoIndex + 1;\n      if (photoIndex >= images.value.length) {\n        photoIndex = 0;\n      }\n      var img = document.getElementById(\"plan\");\n      img.src = images.value[photoIndex].itemImageSrc;\n      initAnno();\n    };\n    var displayBasic = ref(false);\n    onMounted(() => {\n      const requestOptions = {\n        method: \"GET\"\n      };\n      fetch(\"http://localhost:3000/GalleryImages\", requestOptions).then(response => response.json()).then(data => images.value = data);\n    });\n    const __returned__ = {\n      images,\n      responsiveOptions,\n      get anno() {\n        return anno;\n      },\n      set anno(v) {\n        anno = v;\n      },\n      get photoIndex() {\n        return photoIndex;\n      },\n      set photoIndex(v) {\n        photoIndex = v;\n      },\n      initAnno,\n      prevPhoto,\n      nextPhoto,\n      get displayBasic() {\n        return displayBasic;\n      },\n      set displayBasic(v) {\n        displayBasic = v;\n      },\n      ref,\n      onMounted,\n      get Galleria() {\n        return Galleria;\n      },\n      get Annotorious() {\n        return Annotorious;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","Galleria","Annotorious","images","responsiveOptions","breakpoint","numVisible","anno","photoIndex","initAnno","displayBasic","destroy","image","document","getElementById","loadAnnotations","value","itemImageSrc","on","annotation","console","log","data","JSON","stringify","requestOptions","method","headers","body","fetch","then","response","json","postId","id","selection","element","prevPhoto","length","img","src","nextPhoto"],"sources":["/Users/juangonzalez/Documents/GitHub/vue-project-kiwi/Clinet/src/components/ImageGallery.vue"],"sourcesContent":["\n<template>\n    <div class=\"card flex justify-content-center\">\n        <Galleria v-model:visible=\"displayBasic\" :value=\"images\" :responsiveOptions=\"responsiveOptions\" :numVisible=\"9\" containerStyle=\"max-width: 1024px\" :circular=\"true\" :fullScreen=\"true\" :showItemNavigators=\"true\">\n            <template #item=\"slotProps\">\n                <button @click=\"prevPhoto\">Previous</button>\n                <img id=\"plan\" :src=\"slotProps.item.itemImageSrc\" :alt=\"slotProps.item.alt\" style=\"width: 100%; display: block\" />\n                <button @click=\"nextPhoto\">Next</button>\n            </template>\n            <template #thumbnail=\"slotProps\">\n                <img :src=\"slotProps.item.thumbnailImageSrc\" :alt=\"slotProps.item.alt\" style=\"max-height: 100px; width: 100%; display: block\" />\n            </template>\n        </Galleria>\n\n        <button @click=\"displayBasic = true\">Open Gallery</button>\n        <input @keyup.esc=\"closeGallery\">\n    </div>\n</template>\n\n<script setup>\n    import { ref, onMounted } from \"vue\";\n    import Galleria from 'primevue/galleria';\n    import { Annotorious } from '@recogito/annotorious';\n    import '@recogito/annotorious/dist/annotorious.min.css';\n\n    const images = ref();\n    const responsiveOptions = ref([\n        {\n            breakpoint: '1500px',\n            numVisible: 5\n        },\n        {\n            breakpoint: '1024px',\n            numVisible: 3\n        },\n        {\n            breakpoint: '768px',\n            numVisible: 2\n        },\n        {\n            breakpoint: '560px',\n            numVisible: 1\n        }\n    ]);\n    var anno = null;\n    var photoIndex = 0;\n\n\n    const initAnno = () => {\n        displayBasic = true;\n        if(anno != null){\n            anno.destroy();\n            anno = null;\n        }\n\n        anno = new Annotorious({\n            image: document.getElementById(\"plan\")\n        });\n\n        anno.loadAnnotations('http://localhost:3000/testAnnotations.json?sourceImage=' + images.value[photoIndex].itemImageSrc );\n\n        anno.on('createAnnotation', function (annotation) {\n            console.log('Created annotation', annotation);\n\n            var data = JSON.stringify(annotation);\n            console.log(data);\n            const requestOptions = {\n                method: \"POST\",\n                headers: { \"Content-Type\": \"application/json\" },\n                body: data\n            };\n            fetch(\"http://localhost:3000/testAnnotationsAdd\", requestOptions)\n                .then(response => response.json())\n                .then(data => (this.postId = data.id));\n        });\n\n        anno.on('createSelection', function (selection) {\n            console.log('Created selection', selection);\n        });\n\n        anno.on('deleteAnnotation', function (annotation) {\n            console.log('Delete annotation', annotation);\n\n            var data = JSON.stringify(annotation);\n            console.log(data);\n            const requestOptions = {\n                method: \"POST\",\n                headers: { \"Content-Type\": \"application/json\" },\n                body: data\n            };\n            fetch(\"http://localhost:3000/testAnnotationsDelete\", requestOptions)\n                .then(response => response.json())\n                .then(data => (this.postId = data.id));\n        });\n\n        anno.on('mouseEnterAnnotation', function (annotation, element) {\n            console.log('Mouse ENTERED annotation', annotation, element);\n        });\n\n        anno.on('selectAnnotation', function (annotation, element) {\n            console.log('Select annotation', annotation, element);\n        });\n\n        anno.on('cancelSelected', function (selection) {\n            console.log('UNSELECTED', selection);\n        });\n\n        anno.on('clickAnnotation', function (annotation, element) {\n           console.log('Clicked annotation', annotation, element);\n        });\n    };\n    const prevPhoto = () => {\n        photoIndex = photoIndex - 1;\n        if(photoIndex < 0) {\n            photoIndex = images.value.length - 1;\n        }\n        var img = document.getElementById(\"plan\");\n        img.src = images.value[photoIndex].itemImageSrc;\n        initAnno();\n    };\n    const nextPhoto = () => {\n        photoIndex = photoIndex + 1;\n        if(photoIndex >= images.value.length) {\n            photoIndex = 0;\n        }\n        var img = document.getElementById(\"plan\");\n        img.src = images.value[photoIndex].itemImageSrc;\n        initAnno();\n    };\n\n    var displayBasic = ref(false);\n\n    onMounted(() => {\n        const requestOptions = {\n            method: \"GET\"\n        };\n        fetch(\"http://localhost:3000/GalleryImages\", requestOptions)\n            .then(response => response.json())\n            .then((data) => (images.value = data));\n    })\n</script>\n\nexport default {\n    data() {\n        return {\n            displayBasic: false,\n        }\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}